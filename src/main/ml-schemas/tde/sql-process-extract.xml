<?xml version="1.0" encoding="utf-8"?>
<template
  xmlns="http://marklogic.com/xdmp/tde">
  <context>//akn:FRBRWork</context>
  <collections>
    <collection>press-summary</collection>
    <collection>judgment</collection>
  </collections>
  <path-namespaces>
    <path-namespace>
      <prefix>akn</prefix>
      <namespace-uri>http://docs.oasis-open.org/legaldocml/ns/akn/3.0</namespace-uri>
    </path-namespace>
    <path-namespace>
      <prefix>uk</prefix>
      <namespace-uri>https://caselaw.nationalarchives.gov.uk/akn</namespace-uri>
    </path-namespace>
    <path-namespace>
      <prefix>prop</prefix>
      <namespace-uri>http://marklogic.com/xdmp/property</namespace-uri>
    </path-namespace>
  </path-namespaces>
  <rows>
    <row>
      <schema-name>documents</schema-name>
      <view-name>process_data</view-name>
      <columns>
        <column>
          <name>uri</name>
          <scalar-type>string</scalar-type>
          <val>xdmp:node-uri(.)</val>
          <reindexing>visible</reindexing>
        </column>
        <column>
          <name>enrich_version_string</name>
          <scalar-type>string</scalar-type>
          <val>sem:iri(//uk:tna-enrichment-engine/text())</val>
          <nullable>true</nullable>
          <invalid-values>ignore</invalid-values>
          <reindexing>visible</reindexing>
        </column>
        <column>
          <name>enrich_major_version</name>
          <scalar-type>integer</scalar-type>
          <val>xs:int(tokenize(//uk:tna-enrichment-engine/text(),'\.')[1])</val>
          <nullable>true</nullable>
          <invalid-values>ignore</invalid-values>
          <reindexing>visible</reindexing>
        </column>
        <column>
          <name>enrich_minor_version</name>
          <scalar-type>integer</scalar-type>
          <val>xs:int(tokenize(//uk:tna-enrichment-engine/text(),'\.')[2])</val>
          <nullable>true</nullable>
          <invalid-values>ignore</invalid-values>
          <reindexing>visible</reindexing>
        </column>
        <column>
          <name>transform_time</name>
          <scalar-type>dateTime</scalar-type>
          <val>sem:iri(//akn:FRBRdate[@name='transform']/@date)</val>
          <nullable>true</nullable>
          <invalid-values>ignore</invalid-values>
          <reindexing>visible</reindexing>
        </column>
        <column>
          <name>parser_version_string</name>
          <scalar-type>string</scalar-type>
          <val>sem:iri(//uk:parser/text())</val>
          <nullable>true</nullable>
          <invalid-values>ignore</invalid-values>
          <reindexing>visible</reindexing>
        </column>
        <column>
          <name>parser_version_string</name>
          <scalar-type>integer</scalar-type>
          <val>xs:int(tokenize(//uk:parser/text(),'\.')[1])</val>
          <nullable>true</nullable>
          <invalid-values>ignore</invalid-values>
          <reindexing>visible</reindexing>
        </column>
        <column>
          <name>parser_version_string</name>
          <scalar-type>integer</scalar-type>
          <val>xs:int(tokenize(//uk:parser/text(),'\.')[2])</val>
          <nullable>true</nullable>
          <invalid-values>ignore</invalid-values>
          <reindexing>visible</reindexing>
        </column>
      </columns>
    </row>
  </rows>
</template>
